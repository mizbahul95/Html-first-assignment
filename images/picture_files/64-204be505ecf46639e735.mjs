(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[64,12],{"51gp":function(e,t,a){a.d(t,"a",(function(){return P}));var i=a("q1tI"),n=a("sEfC"),r=a.n(n),s=a("qrav");var o=a("BEAQ"),l=a("jgRP"),c=a("9pre"),d=a("U4JR"),h=a("n6mq"),u=a("nKUr");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=[0,.25,.5,.75,.95,.97],b=[0,.5,.8,1],g={threshold:b},y={rootMargin:"-64px 0px 0px 0px",threshold:c.c},f=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function v(){return(new Date).getTime()}function S(e){return!!e.volume&&e.volume>0}class P extends i.Component{constructor(e){super(e),p(this,"videoWrapperRef",Object(i.createRef)()),p(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:a}=this.currentInterval;e.height!==t||e.width!==a?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),p(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),p(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),p(this,"handleLoop",()=>{this.videoTime=0}),p(this,"handleTimeChange",e=>{const{seeking:t,ready:a}=this.state;if(!this.currentInterval.videoDuration)return;const i=1e3*e.time,n=function(e,t,a,i){if(e>t)return null;if(a<=0)return null;for(const n of i){const i=n*a;if(e<=i&&t>i)return n}return null}(this.videoTime,i,this.currentInterval.videoDuration,m);if("number"==typeof n&&this.props.playing&&!t&&a){const e=v();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*n),quartilePercentValue:n})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)}),p(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),p(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),p(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),p(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const a=e.slice(-1)[0],i=function(e,t){for(let a=0;a<t.length;a+=1){const i=t[a],n=t[a+1];if(null==n)return i;if(i<=e&&e<n)return i}return null}(Number.parseFloat(a.intersectionRatio.toFixed(2)),b);"number"==typeof i&&(this.visible=i>=.5),null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:f.PAUSED}):this.startNewInterval({viewability:i}))}),p(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),p(this,"handleClose",()=>{this.startNewInterval()}),p(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=v();this.handleWindowResize=r()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:S(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const a={};S(e)&&!S(this.props)?a.isAudible=!1:!S(e)&&S(this.props)&&(a.isAudible=!0);const i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(a.playbackState=i),Object.keys(a).length>0&&this.startNewInterval(a)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?f.PLAYING:f.PAUSED:f.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const a=this.videoWrapperRef.current;a.clientHeight&&a.clientWidth&&(e=a.clientHeight,t=a.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:a}=this.props,{height:i,width:n,windowHeight:r,windowWidth:s,viewability:o,...l}=t;if(null!=i&&null!=n&&null!=r&&null!=s&&null!=o){const t={...l,height:i,width:n,windowHeight:r,windowWidth:s,viewability:o};Object(d.b)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:a,endTime:i,videoStartTime:n,videoEndTime:r,isAudible:s,height:o,width:l,playbackState:c,quartile:d,quartilePercentValue:h,windowHeight:u,windowWidth:p,viewability:m}},...b}=e;return{...b,eventData:{videoEventData:{videoDuration:t,time:a,endTime:i,videoTime:n,endVideoTime:r,isAudible:s,height:o,width:l,playbackState:c,quartile:d,quartilePercentValue:h,windowHeight:u,windowWidth:p,viewability:m}}}}({...a,view:this.fullscreen?108:a.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=v();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=v();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:c,captions:d,contextLogData:h,controls:p,cropHeight:m,hlsConfig:b,inAdsDesktopVideoExperiment:f,loop:v,objectFit:S,onLoadedChange:P,onPause:_,onPlay:T,onSeek:E,onVolumeChange:D,playbackRate:w,playing:k,playsInline:R,poster:L,preload:O,rootMargin:x,src:A,surface:C,videoStartTime:M,volume:j}=this.props,{seeking:I}=this.state,N=f?y:g;return void 0!==x&&(N.rootMargin=C?Object(l.a)(C):x),Object(u.jsx)(s.a,{options:N,onVisibilityChange:this.handleVisibilityChange,children:Object(u.jsx)("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,style:m?{display:"flex",alignItems:"center",height:"236px"}:{},children:Object(u.jsx)(o.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:c,captions:d,contextLogData:h,controls:p,hlsConfig:b,loop:v,objectFit:S,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:P,onLoop:this.handleLoop,onPause:_,onPlay:T,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:E,onTimeChange:this.handleTimeChange,onVolumeChange:D,playbackRate:w,playing:!I&&k,playsInline:R,poster:L,preload:O,src:A,videoStartTime:M,visible:this.visible,volume:j})})})}}p(P,"defaultProps",h.ib.defaultProps)},"9pre":function(e,t,a){a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}));const i=2,n="V_HLSV3_MOBILE",r=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},BEAQ:function(e,t,a){a.r(t),a.d(t,"getPlaylistSourceSrc",(function(){return c})),a.d(t,"default",(function(){return d}));var i=a("q1tI"),n=a("PioT"),r=a("TqFJ"),s=a("aFfM"),o=(a("n6mq"),a("nKUr"));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class d extends i.PureComponent{constructor(e){super(e),l(this,"componentDidUpdate",(e,t)=>{var a;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&null!==(a=this.videoPlayerRef)&&void 0!==a&&a.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),l(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),l(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:a,onEnded:i}=this.props;i&&(i({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),a&&a()))});const t=c(e.src);this.state={useHlsVideo:!e.preferMp4&&!n.b.isSafari()&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:d,captions:h,contextLogData:u,controls:p,hlsConfig:m,loop:b,objectFit:g,onDurationChange:y,onEnded:f,onFullscreenChange:v,onLoadedChange:S,onPause:P,onPlay:_,onPlayheadDown:T,onPlayheadUp:E,onReady:D,onSeek:w,onTimeChange:k,onVolumeChange:R,playbackRate:L,playing:O,playsInline:x,poster:A,preferMp4:C,preload:M,src:j,videoStartTime:I,visible:N,volume:V}=this.props,{useHlsVideo:F}=this.state,H=c(j),W={...m,startPosition:I||-1},U=!f&&b;return F&&H?Object(o.jsx)(s.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:d,captions:h,contextLogData:u,controls:p,hlsConfig:W,loop:b,loopOveride:U,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:v,onLoadedChange:S,onPause:P,onPlay:_,onPlayheadDown:T,onPlayheadUp:E,onReady:D,onSeek:w,onTimeChange:k,onVolumeChange:R,playbackRate:L,playing:O,playsInline:x,poster:A,preload:M,setVideoRef:this.setVideoPlayerRef,src:H,visible:N,volume:V}):Object(o.jsx)(r.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:d,captions:h,contextLogData:u,controls:p,loop:b,loopOveride:U,objectFit:g,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:v,onLoadedChange:S,onPause:P,onPlay:_,onPlayheadDown:T,onPlayheadUp:E,onReady:D,onSeek:w,onTimeChange:k,onVolumeChange:R,playbackRate:L,playing:O,playsInline:x,poster:A,preload:M,setVideoRef:this.setVideoPlayerRef,src:C?j:H||j,videoStartTime:I,visible:N,volume:V})}}},BUdX:function(e,t,a){a.d(t,"a",(function(){return o}));var i=a("sErn"),n=a("+NLT"),r=a("jZXB");let s=null;const o={fromDesktopContextProps(e){const{context:t,context:{user:a={}}}=e;return{advertiser:t.advertiser?t.advertiser:null,country:t.country,deepLink:t.deep_link,experiments:e.experiments,fullPath:t.full_path,isAmp:!1,isAuthenticated:t.is_authenticated,isBot:"true"===t.is_bot,isSocialBot:!!t.social_bot,isManagedAdvertiser:t.is_managed_advertiser,isRTL:["ar"].includes(t.language),language:t.language,legacyAdvertiser:null,locale:t.locale,loginState:a.login_state||void 0,origin:t.origin,regionFromIp:t.region_from_ip,unauthId:t.unauth_id,userAgent:{browserName:t.browser_name,browserVersion:t.browser_version,canUseNativeApp:t.user_agent_can_use_native_app,isTablet:t.is_tablet_agent,isMobile:t.is_mobile_agent,platform:t.user_agent_platform,platformVersion:t.user_agent_platform_version&&3===t.user_agent_platform_version.length?t.user_agent_platform_version:[0,0,0],raw:t.user_agent}}},fromLegacyContext:e=>({advertiser:e.advertiser?e.advertiser:null,country:e.country,deepLink:e.deep_link,experiments:e.experiments,fullPath:e.full_path,isAmp:!1,isAuthenticated:e.is_authenticated,isBot:"true"===e.is_bot,isSocialBot:!!e.social_bot,isManagedAdvertiser:e.is_managed_advertiser,isRTL:["ar"].includes(e.language),language:e.language,legacyAdvertiser:e.advertiser?e.advertiser:null,locale:e.locale,loginState:e.user&&e.user.login_state||void 0,origin:e.origin,regionFromIp:e.region_from_ip,unauthId:e.unauth_id,userAgent:{browserName:e.browser_name,browserVersion:e.browser_version,canUseNativeApp:e.user_agent_can_use_native_app,isTablet:e.is_tablet_agent,isMobile:e.is_mobile_agent,platform:e.user_agent_platform,platformVersion:e.user_agent_platform_version||[0,0,0],raw:e.user_agent}}),fromGlobalContext(){if(s)return s;const e=o.fromDesktopContextProps({context:n.a.instance,...Object(i.a)(n.a.instance)});var t;return t=n.a.instance,0!==Object.keys(t).length&&(s=e),e},__private_static_provider_fallback_value:()=>({country:"US",deepLink:"",fullPath:"",isAmp:!1,isAuthenticated:!1,isBot:!1,isSocialBot:!1,isManagedAdvertiser:!1,isRTL:!1,language:"en",locale:"en-US",unauthId:"asdasda",origin:"https://example.com",regionFromIp:"CA",userAgent:{browserName:"Chrome",browserVersion:"76.0.3809.132",platform:"OSX",platformVersion:[0,0,0],isTablet:!1,isMobile:!1,raw:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"},experiments:new r.a,advertiser:null,legacyAdvertiser:null})}},BcvT:function(e,t,a){var i=a("q1tI"),n=a("nKUr");function r({anchor:e,children:t,zIndex:a}){const r=Object(i.useRef)(null),[s,o]=Object(i.useState)(0),[l,c]=Object(i.useState)(0),{height:d,width:h}=e.getBoundingClientRect();return Object(i.useEffect)(()=>{const{current:t}=r;if(e&&t){const{height:e,width:a}=t.getBoundingClientRect(),{horizontalOffset:i,verticalOffset:n}=((e,t,a,i)=>({horizontalOffset:-(i/2-t/2),verticalOffset:-(a/2-e/2)}))(d,h,e,a);o(i),c(n)}},[d,h,r.current]),Object(n.jsx)("div",{ref:r,style:{left:s,position:"absolute",top:l,zIndex:a},children:t})}var s=a("n6mq");t.a=function(e){const{anchor:t,onTouch:a,onMouseEnter:i,paused:o,size:l,zIndex:c}=e;return t?Object(n.jsx)(r,{anchor:t,zIndex:c,children:Object(n.jsx)(s.ab,{fullWidth:!1,onTap:({event:e})=>a(e),onMouseEnter:i,rounding:"circle",children:Object(n.jsx)(s.M,{paused:o,size:l})})}):null}},ESls:function(e,t,a){a.d(t,"a",(function(){return s}));var i=a("0rqB"),n=a("pLLR"),r=a("nKUr");function s({activate:e,children:t,isEligible:a,name:s}){return Object(r.jsx)(n.b,{children:n=>Object(r.jsx)(i.a,{activate:e,activateExperiment:e=>n.experiments.v2ActivateExperiment(e)||"",group:n.experiments.v2GetGroup(s)||"",isEligible:a,name:s,children:t})})}},La7j:function(e,t,a){t.a=a("kugi").default},Lic6:function(e,t,a){a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return d}));var i=a("7w6Q"),n=a("Xy1J");const r=["isCellular","videoUrl","sessionMark"];let s={},o="";const l=e=>{const{browserName:t,browserVersion:a,country:i,isAuthenticated:n,isBot:r,isMobile:l,isSocialBot:c,view:d="unknown",viewParameter:h="unknown"}=e;o=(c?"socialBot":r&&"bot")||"nonbot";const u=(e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}})(i);s={browserName:t,browserVersion:(null==a?void 0:a.split(".")[0])||"0",isAuthenticated:n,isMobile:l,region:u,view:d,viewParameter:h}};function c(e,t,a,n={}){const r=a?"closeup":"nonCloseup",l=t?"hls":"nonHls",c={...n,...s},d=`web.video.${l}.${o}.${r}.${e}`;i.a.increment(d,1,c)}function d(e,t,a,l={}){const c=a?"closeup":"nonCloseup",d=t?"hls":"nonHls",h=e.sessionMark===n.f?"sessionStart":"sessionEnd",u={...l,...s};if(Object.entries(e).forEach(([t,a])=>{const n=`web.video.${d}.${o}.${c}.${h}.${t}`,s=parseInt(a,10),l="number"==typeof s?s:-1;var p;if(!r.includes(t))if(t.includes("fatalError")&&!0===a){const{errorCode:t,errorName:a,errorReason:r}=e;i.a.increment(n,1,{errorCode:t,errorName:a,errorReason:r,...u})}else if(t.includes("Width")||t.includes("Height")){const e=(p=l)<0?"negative":0===p?"zero":p<200?"xs":p<400?"s":p<600?"m":p<800?"l":p<1e3?"xl":p<1200?"xxl":"over1200";i.a.increment(n,1,{dimensionBucket:e,...u})}else if("numberOfStalls"===t){let e=a;l>1e3?e="over1000":l>10?e="over10":l<0&&(e="negative"),i.a.increment(n,1,{numberOfStalls:e,...u})}else"screenPixelScale"===t?i.a.increment(n,1,{screenPixelScale:a||-1,...u}):l>=0?(0===l&&i.a.increment(n+".zero",1,u),i.a.timing(n,l,1),i.a.timing(n+"_with_tags",l,1,u)):l<0&&i.a.increment(n+".negative",1,u)}),e.sessionMark!==n.f){const{rebufferRate:t,screenPixelScale:a,startupLatencyMs:n,startupVariantWidth:r,startupPlayerWidth:s}=e,l=`web.video.${d}.${o}.${c}.${h}`;if("number"==typeof r&&"number"==typeof s&&"number"==typeof a){const e=1.5*r>a*s;i.a.increment(`${l}.upscaled.${e?"good":"bad"}`,1,u)}"number"==typeof n&&i.a.increment(`${l}.startupLatency.${n<500?"good":"bad"}`,1,u),"number"==typeof t&&i.a.increment(`${l}.rebufferRate.${t<.01?"good":"bad"}`,1,u)}}},PioT:function(e,t,a){var i=a("+NLT"),n=a("3Qy3");a.d(t,"a",(function(){return n.a}));const r={getBrowser:()=>Object(n.b)(i.a.instance.browser_name||""),isSafari(){return this.getBrowser()===n.a.SAFARI},isChrome(){return this.getBrowser()===n.a.CHROME},isFirefox(){return this.getBrowser()===n.a.FIREFOX},isEdge(){return this.getBrowser()===n.a.EDGE}};t.b=r},Sp3T:function(e,t,a){var i=a("aOj9");t.a=(e={shouldStopEventPropagation:!0})=>{const{loginForMore:t,viewer:a}=Object(i.d)(),{shouldStopEventPropagation:n}=e;return"AUTH"===a.type?e=>e:()=>e=>{let a=null;e&&(e.nativeEvent&&e.nativeEvent instanceof Event?a=e:e.event&&(a=e.event)),n&&a&&a.stopPropagation&&a.stopPropagation(),t&&t.setVisible(!0)}}},TqFJ:function(e,t,a){var i=a("q1tI"),n=a("xkL+"),r=a("U4JR"),s=a("QAzJ"),o=a("pLLR"),l=a("n6mq"),c=a("Lic6"),d=a("Xy1J"),h=a("nKUr");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.Component{constructor(...e){var t;super(...e),u(this,"state",{canPlayVideo:!1,playbackState:d.g.DEFAULT}),u(this,"componentDidMount",()=>{const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:a=!1}=e;Object(c.c)("videoMounted",!1,a),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(d.f,{initiator:"mount"}))}),u(this,"componentDidUpdate",e=>{const{playing:t,visible:a}=this.props;e.visible&&!1===a&&(this.logSessionStartOnNextPlay=!1,this.logPlaybackPerformance(d.e,{initiator:"update"})),!1===e.visible&&!0===a&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(d.f,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(d.f,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}),u(this,"errorRetryCount",2),u(this,"hasSegmentStarted",!1),u(this,"hasPlaybackStarted",!1),u(this,"hasVideoSessionStarted",!1),u(this,"hasVideoSessionEnded",!1),u(this,"lastStartPlayTime",null),u(this,"lastStallTime",null),u(this,"logSessionStartOnNextPlay",!1),u(this,"playerId",""),u(this,"videoRefSetTime",null),u(this,"videoSessionId",""),u(this,"videoVisibleTime",null),u(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numStalls:0,playbackStartTimestamp:null,segments:[],srcString:(t=this.props.src,t?"string"==typeof t?t:Array.isArray(t)&&t[0].src?t[0].src:"unsupported_type_"+typeof t:"undefined"),totalStallDurationMs:0}),u(this,"addSegment",()=>{const{canPlayTime:e,loadStartTime:t,segments:a,srcString:i}=this.playbackPerformance;let n=-1;e&&t&&0===a.length&&(n=e>t?e-t:0);const r=this.videoPlayerRef&&this.videoPlayerRef.video,s={indicatedKbps:-1,duration:r&&r.duration*d.c||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:n,switchBitrateKbps:-1,uri:i,viewportWidth:r&&r.clientWidth||-1,viewportHeight:r&&r.clientHeight||-1,watchedDurationMs:0};a.push(s)}),u(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*d.c:0),u(this,"getVideoResourceTiming",()=>{var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e.performance)&&void 0!==t&&t.getEntriesByName&&this.playbackPerformance.srcString){const e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null}),u(this,"handleCanPlayVideo",e=>{const{contextLogData:t={},onReady:a,playing:i,videoStartTime:n}=this.props,{is_closeup_video:r=!1}=t,{canPlayVideo:s}=this.state;Object(c.c)("handleCanPlayVideo",!1,r,{firstCanPlayEvent:!s,playing:i}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date,null!=n&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=n)),this.setState({canPlayVideo:!0}),a&&a(e)}),u(this,"handleEnded",e=>{const{loop:t,onEnded:a}=this.props,{segments:i}=this.playbackPerformance,n=i&&i[i.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),n&&(n.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(d.e,{initiator:"videoEnded",loop:t}),this.setState({playbackState:d.g.ENDED}),a&&a(e)}),u(this,"handleError",()=>{var e,t,a,i,n,r,s,o;const{contextLogData:l={}}=this.props,{is_closeup_video:h=!1}=l,u=this.videoPlayerRef&&this.videoPlayerRef.video;(null==u||null===(e=u.error)||void 0===e?void 0:e.code)!==d.d.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${(null==u||null===(t=u.error)||void 0===t?void 0:t.message)||""}`,this.playbackPerformance.errorCode=(null==u||null===(a=u.error)||void 0===a?void 0:a.code)||0,this.playbackPerformance.errorName=(null==u||null===(i=u.error)||void 0===i||null===(n=i.message)||void 0===n?void 0:n.slice(0,100))||"unknown",this.playbackPerformance.errorReason=(null==u||null===(r=u.error)||void 0===r||null===(s=r.message)||void 0===s?void 0:s.slice(0,100))||"unknown";const p={errorRecoveryGroup:this.props.errorRecoveryGroup||"null",errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:(null==u?void 0:u.networkState)||"unknown"};if(Object(c.c)("fatalError",!1,h,p),this.props.errorRecoveryGroup.startsWith("enabled"))switch(null==u||null===(o=u.error)||void 0===o?void 0:o.code){case d.d.MEDIA_ERR_ABORTED:break;case d.d.MEDIA_ERR_NETWORK:case d.d.MEDIA_ERR_DECODE:case d.d.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(null==u||u.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:d.g.FAILED})}),u(this,"handleLoadedMetadata",()=>{this.setState({playbackState:d.g.LOADED_METADATA})}),u(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:d.g.LOAD_START})}),u(this,"handleLoadedData",()=>{this.setState({playbackState:d.g.LOADED_DATA})}),u(this,"handlePlaying",()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.setState({playbackState:d.g.PLAYING})}),u(this,"handlePause",()=>{this.state.playbackState!==d.g.STALLING&&this.state.playbackState!==d.g.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.updateStallDuration()),this.setState({playbackState:d.g.PAUSED})}),u(this,"handleSeeking",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==d.g.ENDED&&this.setState({playbackState:d.g.SEEKING})}),u(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==d.g.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numStalls+=1,this.setState({playbackState:d.g.STALLING}))}),u(this,"handleTimeUpdate",e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===d.g.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),u(this,"resetPlaybackMetrics",()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numStalls=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]}),u(this,"setLastSegmentStartPlayTime",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),u(this,"setLastSegmentPlaybackStartDate",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),u(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),u(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handlePause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),u(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),u(this,"updateWatchDurationForCurrentSegment",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],a=t?t.lastStartPlayTime:null,i=this.getCurrentVideoTime();if(t&&null!==a&&"number"==typeof i&&"number"==typeof a){const e=i-a;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),u(this,"logPlaybackPerformance",(e,t)=>{const{contextLogData:a={},userId:i}=this.props,{is_closeup_video:n=!1}=a,{canPlayTime:s,detailedErrors:o,errorCode:l,errorName:h,errorReason:u,hasFatalError:p,loadStartTime:m,numStalls:b,playbackStartTimestamp:g,srcString:y}=this.playbackPerformance,f=this.videoPlayerRef&&this.videoPlayerRef.video,v=e===d.f,S=v&&!this.hasVideoSessionStarted,P=!v&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(f&&(S||P)){var _;let S=-1;s&&m&&(S=s>m?s-m:0);let P=-1;s&&this.videoVisibleTime&&(P=s>this.videoVisibleTime?s-this.videoVisibleTime:0);const T=this.getVideoResourceTiming(),E={averageVideoKbps:-1,detailedErrors:o,downloadedKiloBytes:"number"==typeof(null==T?void 0:T.decodedBodySize)&&T.decodedBodySize/d.b||0,errorCode:l,errorName:h,errorReason:u,fatalError:p,isCellular:!1,nativeVideoDurationMs:f.duration*d.c||-1,numberOfStalls:b,overallWatchedDurationMs:-1,rebufferRate:-1,playbackStartTimestamp:g||-1,segments:[],sessionMark:e,screenPixelScale:null!==(_=window)&&void 0!==_&&_.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:f.clientWidth,startupPlayerHeight:f.clientHeight,startupTimeMs:S,startupLatencyMs:P,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:f.videoWidth,startupVariantHeight:f.videoHeight,videoUrl:y};if(v)this.videoSessionId=Object(d.i)(i),this.playerId=this.playerId||Object(d.h)();else{this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const e=this.playbackPerformance.segments.reduce((e,t)=>e+(t.watchedDurationMs||0),0);E.rebufferRate=this.playbackPerformance.totalStallDurationMs/e,E.overallWatchedDurationMs=e,E.startupVariantWatchedDurationMs=e,E.segments=this.playbackPerformance.segments}Object(c.a)(E,!1,n,{errorRecoveryGroup:this.props.errorRecoveryGroup||"null",playbackState:this.state.playbackState,...t}),Object(r.b)(3606,{...a,is_closeup_video:n,playback_session_id:this.videoSessionId,eventData:{videoPerformanceData:E}}),v?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),Object(c.c)(v?"sessionStart":"sessionEnd",!1,n,{playbackState:this.state.playbackState,...t})}})}componentWillUnmount(){const{loop:e}=this.props;this.logPlaybackPerformance(d.e,{initiator:"unmount",loop:e})}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:s,captions:o,controls:c,loop:d,loopOveride:u,objectFit:p,onDurationChange:m,onFullscreenChange:b,onLoadedChange:g,onPause:y,onPlay:f,onPlayheadDown:v,onPlayheadUp:S,onSeek:P,onVolumeChange:_,playbackRate:T,playing:E,playsInline:D,poster:w,preload:k,src:R,volume:L}=this.props,{canPlayVideo:O}=this.state;return Object(h.jsx)(l.ib,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:s,captions:o,controls:c,loop:void 0===u?d:u,objectFit:p,onDurationChange:m,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:b,onLoadedChange:g,onLoadStart:this.handleLoadStart,onPause:y,onPlay:f,onPlaying:this.handlePlaying,onPlayheadDown:v,onPlayheadUp:S,onReady:this.handleCanPlayVideo,onSeek:P,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:_,onWaiting:this.handleStalled,playbackRate:T,playing:O&&E,playsInline:D,poster:w,preload:k,ref:this.setVideoPlayerRef,src:R,volume:L})}}t.a=Object(i.memo)((function(e){const t=Object(s.a)("web_mp4_error_recovery")().group,{country:a,isAuthenticated:i,isBot:r,isSocialBot:l,unauthId:d,userAgent:u}=Object(o.d)(),{browserName:m,browserVersion:b,isMobile:g}=u,{contextLogData:y={}}=e,{is_closeup_video:f=!1,view:v,viewParameter:S}=y,P=Object(n.b)(),_={browserName:m,browserVersion:b,country:a,isAuthenticated:i,isBot:r,is_closeup_video:f,isMobile:g,isSocialBot:l,view:v,viewParameter:S};return Object(c.b)(_),Object(h.jsx)(p,{...e,userId:P.id||d,errorRecoveryGroup:t})}))},XRfM:function(e,t,a){a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"f",(function(){return m}));var i=a("Ye/N");const n=function(e,t){const a=t||0,i=Math.pow(10,a),n=+(a?e*i:e).toFixed(8),r=Math.floor(n),s=n-r,o=s>.5-1e-8&&s<.5+1e-8?r%2==0?r:r+1:Math.round(n);return a?o/i:o},r={AUD:"A$",BRL:"R$",CAD:"$",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"£",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$"},s=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function o(e,t,a,i,n,r,o){const l=function(e,t,a,i,n="symbol"){const r={maximumFractionDigits:e,minimumFractionDigits:t};return a&&(r.style=a,"currency"===a&&(r.currency=i,r.currencyDisplay=n)),r}(a,i,n,r,o);return t.toLocaleString([s(e)?e:"en-US"],l)}function l(e,t,a){let r,s;const l=a&&a.style||void 0,c=a&&a.shortform||!1,d=a&&a.uplimit||void 0,h=a&&a.currency||void 0;if(d&&t>d)return d+"+";if("currency"===l?(r=void 0===a||void 0===a.maximum_fraction_digits?2:a.maximum_fraction_digits,s=void 0===a||void 0===a.minimum_fraction_digits?2:a.minimum_fraction_digits):(r=void 0===a||void 0===a.maximum_fraction_digits?0:a.maximum_fraction_digits,s=void 0===a||void 0===a.minimum_fraction_digits?0:a.minimum_fraction_digits),c&&t>999&&(r=void 0===a||void 0===a.shortform_maximum_fraction_digits?2:a.shortform_maximum_fraction_digits,s=0),r<s)return String(t);let u=t,p="";const m=[{"100M":{value:1e8,localeKey:i.a._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:i.a._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],b=[{b:{value:1e9,localeKey:i.a._("b","Abbreviation for one billion.","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:i.a._("m","Abbreviation for one million.","Abbreviation for one million.")}},{k:{value:1e3,localeKey:i.a._("k","Abbreviation for one thousand.","Abbreviation for one thousand.")}}],g=/^zh|ja|ko/.test(e);if(c&&t>999){const e=g?m:b;for(let a=0;a<e.length;a+=1){const i=Object.keys(e[a])[0],s=e[a][i].value;if(t>=s){u=n(t/s*Math.pow(10,r))/Math.pow(10,r),p=e[a][i].localeKey;break}}}return o(e,u,r,s,l,h||void 0)+p}const c={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour"},d=function(e,t,a,i=!0){const n=function(e){switch(e){case c.YEAR:return{year:"numeric"};case c.LONG:return{year:"numeric",month:"long",day:"numeric"};case c.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case c.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case c.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case c.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case c.MONTH_DAY:return{month:"long",day:"numeric"};case c.SHORT_MONTH:return{month:"short"};case c.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case c.DAY:return{day:"numeric"};case c.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case c.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case c.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case c.TIME:return{hour:"numeric",minute:"2-digit"};case c.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case c.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(a);i&&(n.timeZone="UTC");return new Intl.DateTimeFormat(e,n).format(t)},h=function(e){return 1.1.toLocaleString(e).substring(1,2)},u=function(e,t){return","===h(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},p=function(e,t){return","===h(t)&&e?e.replace(",","."):e},m=function(e){switch(e){case"zh":return i.a._("Chinese","locale.languageName","Language name");case"cs":return i.a._("Czech","locale.languageName","Language name");case"da":return i.a._("Danish","locale.languageName","Language name");case"nl":return i.a._("Dutch","locale.languageName","Language name");case"en":return i.a._("English","locale.languageName","Language name");case"fi":return i.a._("Finnish","locale.languageName","Language name");case"fr":return i.a._("French","locale.languageName","Language name");case"de":return i.a._("German","locale.languageName","Language name");case"el":return i.a._("Greek","locale.languageName","Language name");case"hu":return i.a._("Hungarian","locale.languageName","Language name");case"id":return i.a._("Indonesian","locale.languageName","Language name");case"it":return i.a._("Italian","locale.languageName","Language name");case"ja":return i.a._("Japanese","locale.languageName","Language name");case"ko":return i.a._("Korean","locale.languageName","Language name");case"nb":return i.a._("Norwegian","locale.languageName","Language name");case"pl":return i.a._("Polish","locale.languageName","Language name");case"pt":return i.a._("Portuguese","locale.languageName","Language name");case"ro":return i.a._("Romanian","locale.languageName","Language name");case"ru":return i.a._("Russian","locale.languageName","Language name");case"sk":return i.a._("Slovak","locale.languageName","Language name");case"es":return i.a._("Spanish","locale.languageName","Language name");case"sv":return i.a._("Swedish","locale.languageName","Language name");case"tr":return i.a._("Turkish","locale.languageName","Language name");case"uk":return i.a._("Ukrainian","locale.languageName","Language name");default:return e}},b={DateFormatType:c,formatDate:d,ngettext:function(e,t,a,n){const r=+function(e){return i.a.getPluralFunction(e)}(e)(n);let s;return s="en-US"===e&&1===r?a:t,i.a._(s,"",r)},prettyNumberFormat:l,numberFormat:o,currencySymbols:r,localizeCurrencyValue:u,unlocalizeCurrencyValue:p};t.c=b},Xy1J:function(e,t,a){a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"i",(function(){return h})),a.d(t,"h",(function(){return u}));var i=a("7Cbv");const n=1,r=2,s=1e3,o=1e3,l=1e3,c=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function h(e){return e+"-"+Object(i.a)()}function u(){return Object(i.a)()}},YGxj:function(e,t,a){a.d(t,"a",(function(){return h}));var i=a("q1tI"),n=a("c4Fo"),r=a("BcvT"),s=a("n6mq"),o=a("nKUr");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.PureComponent{constructor(...e){super(...e),l(this,"onScroll",()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:a,idealDirection:i}=this.props,n=a.slice(-3);return Object(o.jsx)(s.L,{anchor:e,color:"white",idealDirection:i,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:Object(o.jsxs)(s.f,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[Object(o.jsx)(s.f,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:Object(o.jsx)(s.bb,{color:"darkGray",weight:"bold",children:t})}),Object(o.jsx)(s.f,{display:"flex",marginEnd:-2,paddingX:2,children:n.map(e=>Object(o.jsx)(s.f,{height:60,width:50,paddingX:1,children:Object(o.jsx)(s.D,{rounding:2,height:60,children:Object(o.jsx)(s.y,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.Component{constructor(...e){super(...e),d(this,"state",{paused:!1}),d(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,a){return t&&e.text.replace("{boardName}",t),a?a(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:a,boardTextOverride:l,flyoutSize:d,fontSize:h,idealDirection:u,useMasonryFlyout:p,noClickToDismiss:m,onClickComplete:b,onClickDismiss:g,placementId:y,positionRelativeToAnchor:f,shouldTimeoutDismiss:v,showCaret:S,textAlign:P,textOverflow:_,textOverrideFn:T,textWeight:E,customizedComplete:D,pulsarZIndex:w}=this.props,k=t||(({children:e})=>p?Object(o.jsx)(s.A,{children:e}):e),R="blue";return Object(o.jsx)(n.a,{experienceIds:a,placementId:y,type:8,children:({complete:t,dismiss:a,display_data:n})=>(this.setDefaultPulsarTooltip(n),n.has_pulsar||n.has_tooltip?(v&&n.disappearTime&&n.disappearTime>0&&(this.timer=setTimeout(()=>(a(),null),n.disappearTime)),Object(o.jsxs)(i.Fragment,{children:[n.has_pulsar&&Object(o.jsx)(r.a,{anchor:e,onTouch:()=>this.handlePulsarClick(n.has_tooltip,t),paused:this.state.paused,zIndex:w&&w.index()}),n.has_tooltip&&(!n.has_pulsar||this.state.paused)&&(n.thumbnail_urls?Object(o.jsx)(c,{anchor:e,dismiss:a,idealDirection:u||"down",text:n.text,thumbnails:n.thumbnail_urls}):Object(o.jsx)(k,{children:Object(o.jsx)(s.L,{anchor:e,color:R,idealDirection:u||"down",onDismiss:m?()=>{}:a,positionRelativeToAnchor:!p&&f,shouldFocus:!1,showCaret:S,size:d,children:Object(o.jsxs)(s.f,{column:12,padding:3,children:[Object(o.jsx)(s.bb,{align:"right"===P?"end":P,color:"white",overflow:_,size:h,weight:E||"bold",children:this.getText(n,l,T)}),n.sub_text&&Object(o.jsx)(s.f,{paddingY:2,children:Object(o.jsx)(s.bb,{color:"white",size:h,children:n.sub_text})}),n.complete_button_cta_url&&Object(o.jsx)("div",{children:Object(o.jsx)(s.bb,{align:"right"===P?"end":P,color:"white",size:h,children:Object(o.jsx)(s.C,{href:n.complete_button_cta_url,target:"blank",onClick:({disableOnNavigation:e})=>e(),children:n.complete_button_text})})}),!n.complete_button_cta_url&&(n.dismiss_button_text||n.complete_button_text)&&Object(o.jsxs)(s.f,{display:"flex",alignItems:"center",marginTop:2,children:[n.dismiss_button_text&&Object(o.jsx)(s.f,{marginEnd:1,column:6,children:Object(o.jsx)(s.g,{fullWidth:!0,color:R,onClick:()=>{g&&g(),a()},size:"md",text:n.dismiss_button_text})}),n.complete_button_text&&Object(o.jsx)(s.f,{column:n.dismiss_button_text?6:12,children:D?Object(o.jsx)(s.ab,{fullHeight:!0,onTap:()=>{t(),b&&b()},rounding:2,children:Object(o.jsx)(s.f,{display:"flex",color:"white",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:Object(o.jsx)(s.bb,{color:"blue",weight:"bold",children:n.complete_button_text})})}):Object(o.jsx)(s.g,{fullWidth:!0,color:"white",size:"md",text:n.complete_button_text,onClick:()=>{t(),b&&b()}})})]})]})})}))]})):(t(),null))})}}d(h,"defaultProps",{fontSize:"lg",positionRelativeToAnchor:!0})},ZVOf:function(e,t,a){a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return d}));var i=a("eOdZ"),n=a("/X16");function r(e,t){return i.a.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function s(e,t){return{type:n.a.USER_FOLLOW,payload:{id:e,value:t}}}function o(e,t=null){return a=>{r(e,t).callCreate().catch(()=>a(s(e,!1))),a(s(e,!0))}}function l(e,t=null){return async a=>{a(s(e,!0)),await r(e,t).callCreate().catch(t=>{throw a(s(e,!1)),t})}}function c(e,t=null){return a=>{r(e,t).callDelete().catch(()=>a(s(e,!0))),a(s(e,!1))}}function d(e,t=null){return async a=>{a(s(e,!1)),await r(e,t).callDelete().catch(t=>{throw a(s(e,!0)),t})}}},aFfM:function(e,t,a){var i=a("q1tI"),n=a("ulZh"),r=a.n(n),s=a("xkL+"),o=a("U4JR"),l=a("QAzJ"),c=a("pLLR"),d=a("n6mq"),h=a("Lic6"),u=a("Xy1J"),p=a("nKUr");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends i.PureComponent{constructor(...e){super(...e),m(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:u.g.DEFAULT}),m(this,"errorRetryCount",1),m(this,"firstFragBuffered",!1),m(this,"hasPlaybackStarted",!1),m(this,"hasVideoSessionStarted",!1),m(this,"hasVideoSessionEnded",!1),m(this,"hls",null),m(this,"fragStartupTime",{}),m(this,"lastLevelSwitchKbps",null),m(this,"lastStallTime",null),m(this,"logSessionStartOnNextPlay",!1),m(this,"playerId",""),m(this,"videoSessionId",""),m(this,"videoVisibleTime",null),m(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numStalls:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?this.props.src:this.props.src[0].src,totalStallDurationMs:0,videoCreatedTime:null}),m(this,"initializeHls",()=>{this.destroyHls();const{src:e,hlsConfig:t}=this.props,a=new r.a(t);a.loadSource(e),this.videoPlayerRef&&a.attachMedia(this.videoPlayerRef.video),a.on(r.a.Events.FRAG_BUFFERED,this.handleHlsFragBuffered),a.on(r.a.Events.FRAG_CHANGED,this.handleHlsFragChanged),a.on(r.a.Events.FRAG_LOADING,this.handleHlsFragLoading),a.on(r.a.Events.FRAG_LOADED,this.handleHlsFragLoaded),a.on(r.a.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0})}),a.on(r.a.Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),a.on(r.a.Events.ERROR,this.handleHlsError),this.hls=a}),m(this,"destroyHls",()=>{const{hls:e}=this;e&&e.destroy()}),m(this,"addSegment",e=>{const{segments:t}=this.playbackPerformance,a=t&&t[t.length-1];if(this.hls&&t.length&&a&&a.uri!==e.url){this.updateWatchDurationForCurrentSegment();const a=this.videoPlayerRef&&this.videoPlayerRef.video,i=this.hls&&this.hls.levels||{},n="number"==typeof e.level?i[e.level]:{},r=this.fragStartupTime[e.url];let s=-1;r&&r.startLoadTime&&r.endLoadTime&&(s=r.endLoadTime-r.startLoadTime);const o={indicatedKbps:n.bitrate/u.a,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/u.a||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:n.width,sourceHeight:n.height,startupTimeMs:s,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:a&&a.clientWidth||-1,viewportHeight:a&&a.clientHeight||-1,watchedDurationMs:0};t.push(o)}}),m(this,"initializeSegments",e=>{const{contextLogData:t={}}=this.props,{is_closeup_video:a=!1}=t,{segments:i}=this.playbackPerformance;if(!i.length)if(this.hls&&this.videoPlayerRef&&this.videoPlayerRef.video&&e){if(!i.length&&"number"==typeof e.level){const t=this.videoPlayerRef&&this.videoPlayerRef.video,a=this.hls.levels,n="number"==typeof e.level?a[e.level]:{},r=this.fragStartupTime[e.url];let s=-1;r&&r.startLoadTime&&r.endLoadTime&&(s=r.endLoadTime-r.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/u.a;const o={indicatedKbps:n.bitrate/u.a,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/u.a||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:n.width,sourceHeight:n.height,startupTimeMs:s,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};i.push(o)}}else Object(h.c)("initializeSegmentsFailed",!0,a)}),m(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*u.c:null),m(this,"handleCanPlayVideo",e=>{const{contextLogData:t={},onReady:a,playing:i}=this.props,{is_closeup_video:n=!1}=t,{canPlayVideo:r}=this.state;Object(h.c)("handleCanPlayVideo",!0,n,{firstCanPlayEvent:!r,playing:i}),this.playbackPerformance.hasFatalError=!1,r||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),a&&a(e)}),m(this,"handleEnded",e=>{const{loop:t,onEnded:a}=this.props,{segments:i}=this.playbackPerformance,n=i&&i[i.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),n&&(n.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(u.e,{initiator:"videoEnded",loop:t}),this.setState({playbackState:u.g.ENDED}),a&&a(e)}),m(this,"handleHlsError",(e,t)=>{var a;const{contextLogData:i={}}=this.props,{is_closeup_video:n=!1}=i;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){var s,o,l,c;this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;const e={errorRecoveryGroup:this.props.errorRecoveryGroup,errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:(null===(s=t.err)||void 0===s||null===(o=s.message)||void 0===o?void 0:o.slice(0,50))||"unknown",errorResponse:(null===(l=t.response)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.slice(0,50))||"unknown",playbackState:this.state.playbackState};if(Object(h.c)("fatalError",!0,n,e),this.props.errorRecoveryGroup.startsWith("enabled")&&this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case r.a.ErrorTypes.NETWORK_ERROR:if(t.details===r.a.ErrorDetails.MANIFEST_LOAD_ERROR||t.details===r.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===r.a.ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var d;const{src:e}=this.props;null===(d=this.hls)||void 0===d||d.loadSource(e)}else{var p;null===(p=this.hls)||void 0===p||p.startLoad()}break;case r.a.ErrorTypes.MEDIA_ERROR:null===(a=this.hls)||void 0===a||a.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:u.g.FAILED})}),m(this,"handleHlsFragBuffered",(e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)}),m(this,"handleHlsFragChanged",(e,t)=>{this.addSegment(t.frag)}),m(this,"handleHlsFragLoading",(e,t)=>{var a;const i=null===(a=t.frag)||void 0===a?void 0:a.url;i&&!this.fragStartupTime[i]&&(this.fragStartupTime[i]={startLoadTime:new Date})}),m(this,"handleHlsFragLoaded",(e,t)=>{var a;t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/u.b);const i=null===(a=t.frag)||void 0===a?void 0:a.url;i&&this.fragStartupTime[i]&&this.fragStartupTime[i].startLoadTime&&(this.fragStartupTime[i].endLoadTime=new Date)}),m(this,"handleHlsLevelSwitched",()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/u.a)}),m(this,"handleLoadedMetadata",()=>{this.setState({playbackState:u.g.LOADED_METADATA})}),m(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:u.g.LOAD_START})}),m(this,"handleLoadedData",()=>{this.setState({playbackState:u.g.LOADED_DATA})}),m(this,"handlePlaying",()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.setState({playbackState:u.g.PLAYING})}),m(this,"handlePause",()=>{this.state.playbackState!==u.g.STALLING&&this.state.playbackState!==u.g.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.updateStallDuration()),this.setState({playbackState:u.g.PAUSED})}),m(this,"handleSeeking",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==u.g.ENDED&&this.setState({playbackState:u.g.SEEKING})}),m(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==u.g.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numStalls+=1),this.setState({playbackState:u.g.STALLING})}),m(this,"handleTimeUpdate",e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===u.g.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),m(this,"resetPlaybackMetrics",()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numStalls=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]}),m(this,"setLastSegmentStartPlayTime",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),m(this,"setLastSegmentPlaybackStartDate",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),m(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),m(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handlePause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),m(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),m(this,"updateWatchDurationForCurrentSegment",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],a=t?t.lastStartPlayTime:null,i=this.getCurrentVideoTime();if(t&&null!==a&&"number"==typeof i&&"number"==typeof a){const e=i-a;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),m(this,"logPlaybackPerformance",(e,t)=>{const{contextLogData:a={},userId:i}=this.props,{is_closeup_video:n=!1}=a,{canPlayTime:r,detailedErrors:s,downloadedKiloBytes:l,errorCode:c,errorName:d,errorReason:p,hasFatalError:m,playbackStartTimestamp:b,segments:g,srcString:y,loadStartTime:f,numStalls:v}=this.playbackPerformance,S=this.videoPlayerRef&&this.videoPlayerRef.video,P=e===u.f,_=P&&!this.hasVideoSessionStarted,T=!P&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&S&&(_||T)){var E;let _=-1;r&&f&&(_=r>f?r-f:0);let T=-1;r&&this.videoVisibleTime&&(T=r>this.videoVisibleTime?r-this.videoVisibleTime:0);const D={averageVideoKbps:-1,detailedErrors:s,downloadedKiloBytes:l,isCellular:!1,errorCode:c,errorName:d,errorReason:p,fatalError:m,nativeVideoDurationMs:S.duration*u.c||-1,numberOfStalls:v,overallWatchedDurationMs:-1,rebufferRate:-1,playbackStartTimestamp:b||-1,segments:[],sessionMark:e,screenPixelScale:null!==(E=window)&&void 0!==E&&E.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:S.clientWidth,startupPlayerHeight:S.clientHeight,startupTimeMs:_,startupLatencyMs:T,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:S.videoWidth,startupVariantHeight:S.videoHeight,videoUrl:y};if(P)this.videoSessionId=Object(u.i)(i),this.playerId=this.playerId||Object(u.h)();else if(g.length>0){const e=this.hls.levels,t=g[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const a=g.reduce((t,a)=>{if(a&&"number"==typeof a.level&&e&&e.length>0){return t+(e[a.level]||{}).bitrate*(a.watchedDurationMs||0)/u.c}return t},0),i=g.reduce((e,t)=>e+(t.watchedDurationMs||0),0);let n=null,r=0,s=0;do{r+=g[s].watchedDurationMs,n=n||g[s].level,s+=1}while(s<g.length&&g[s].level===n);D.startupVariantKbps=t.indicatedKbps,D.startupVariantWatchedDurationMs=r,D.startupVariantWidth=t.sourceWidth,D.startupVariantHeight=t.sourceHeight,D.startupPlayerWidth=t.viewportWidth,D.startupPlayerHeight=t.viewportHeight,D.overallWatchedDurationMs=i,i>0?(D.averageVideoKbps=a/(i/u.c),D.rebufferRate=this.playbackPerformance.totalStallDurationMs/i):0===i&&(D.averageVideoKbps=0,D.rebufferRate=0),D.segments=g}Object(h.a)(D,!0,n,{errorRecoveryGroup:this.props.errorRecoveryGroup||"null",playbackState:this.state.playbackState,...t}),Object(o.b)(3606,{...a,is_closeup_video:n,playback_session_id:this.videoSessionId,eventData:{videoPerformanceData:D}}),P?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),Object(h.c)(P?"sessionStart":"sessionEnd",!0,n,{playbackState:this.state.playbackState,...t})}})}componentDidMount(){const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:a=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),Object(h.c)("videoMounted",!0,a),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(u.f,{initiator:"mount"}))}componentDidUpdate(e){const{loop:t,playing:a,src:i,visible:n}=this.props;var r,s;(typeof(r=e.src)!=typeof(s=i)||(Array.isArray(s)?r.length!==s.length||s.some((e,t)=>!Array.isArray(r)||e.type!==r[t].type||e.src!==r[t].src):s!==r))&&this.initializeHls(),e.visible&&!1===n&&(this.logSessionStartOnNextPlay=!1,this.logPlaybackPerformance(u.e,{initiator:"update",loop:t})),!1===e.visible&&!0===n&&(this.videoVisibleTime=this.videoVisibleTime||new Date,a?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(u.f,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),a&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(u.f,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){const{loop:e}=this.props;this.logPlaybackPerformance(u.e,{initiator:"unmount",loop:e}),this.destroyHls()}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:s,captions:o,controls:l,loop:c,loopOveride:h,onDurationChange:u,onFullscreenChange:m,onLoadedChange:b,onPause:g,onPlay:y,onPlayheadDown:f,onPlayheadUp:v,onSeek:S,onVolumeChange:P,playbackRate:_,playing:T,playsInline:E,poster:D,preload:w,src:k,volume:R}=this.props,{canPlayVideo:L,isManifestParsed:O}=this.state;return Object(p.jsx)(d.ib,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:a,accessibilityPauseLabel:i,accessibilityPlayLabel:n,accessibilityUnmuteLabel:r,aspectRatio:s,captions:o,controls:l,loop:void 0===h?c:h,onDurationChange:u,onEnded:this.handleEnded,onFullscreenChange:m,onLoadStart:this.handleLoadStart,onLoadedChange:b,onPause:g,onPlay:y,onPlaying:this.handlePlaying,onPlayheadDown:f,onPlayheadUp:v,onReady:this.handleCanPlayVideo,onSeek:S,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:P,onWaiting:this.handleStalled,playbackRate:_,playing:O&&L&&T,playsInline:E,poster:D,preload:w,ref:this.setVideoPlayerRef,src:k,volume:R})}}t.a=Object(i.memo)((function(e){const t=Object(l.a)("web_hls_error_recovery")().group,{country:a,isAuthenticated:i,isBot:n,isSocialBot:r,unauthId:o,userAgent:d}=Object(c.d)(),{browserName:u,browserVersion:m,isMobile:g}=d,{contextLogData:y={}}=e,{is_closeup_video:f=!1,view:v,viewParameter:S}=y,P=Object(s.b)(),_={browserName:u,browserVersion:m,country:a,isAuthenticated:i,isBot:n,is_closeup_video:f,isMobile:g,isSocialBot:r,view:v,viewParameter:S};return Object(h.b)(_),Object(p.jsx)(b,{...e,userId:P.id||o,errorRecoveryGroup:t})}))},d90F:function(e,t,a){var i=a("ESls");a.d(t,"a",(function(){return i.a}))},jZXB:function(e,t,a){a.d(t,"a",(function(){return n}));var i=a("zir5");class n extends i.a{constructor(){super({},{},!1)}v2ActivateExperiment(e){return null}v2LogExperimentGroupOverride(e,t){}}},jgRP:function(e,t,a){a.d(t,"a",(function(){return i}));const i=e=>{if("undefined"==typeof window)return"";let t=0;const a=document.querySelector('[data-test-id="header"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:a}=e.getBoundingClientRect();t+=a}break;case"SearchItem":const a=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}const i=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}},jmst:function(e,t,a){var i=a("q1tI"),n=a("i8i4"),r=a.n(n),s=a("nKUr");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l=new Map;let c=null;const d=e=>{e.forEach(e=>{const t=l.get(e.target);t&&t(e)})};t.a=e=>{class t extends i.Component{constructor(...e){super(...e),o(this,"seen",!1),o(this,"flushTimeout",null),o(this,"enter",e=>{const t=e.intersectionRatio>0||e.isIntersecting;this.seen=t,this.seen&&this.props.onVisibilityChanged(!0)}),o(this,"leave",()=>{const e=this._node;e&&(e=>l.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)}),o(this,"observe",e=>{try{this._node=r.a.findDOMNode(this)}catch(i){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:t}=this.props,a=this._node;((e,t="-64px 0px 0px 0px",a)=>{const i={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};c=c||new window.IntersectionObserver(d,i),l.set(e,a),c.observe(e)})(a,e,e=>{if(!l.has(a))return;const i=t?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,n=this.props.trackFullVisible?e.intersectionRatio>=1:i,r=this.props.trackFullVisible?0===e.intersectionRatio:!n;!this.seen&&n?this.enter(e):this.seen&&r&&this.leave()})})}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{c.unobserve(e),l.delete(e)})(e))}render(){return Object(s.jsx)(e,{...this.props})}}return o(t,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),t}},kugi:function(e,t,a){a.r(t),a.d(t,"default",(function(){return s}));var i=a("zir5"),n=a("4xvr"),r=a("eOdZ");class s extends i.a{v2ActivateExperiment(e){return this._getGroupForExperiment(e,!0)}flush(){this._queuedResource&&this._queuedResource.flush()}v2LogExperimentGroupOverride(e,t){this._reportExperimentActivated(e,!1,t,t)}_getGroupForExperiment(e,t,a){void 0===t&&(t=!0);let i=this.active[e];return void 0===i&&t&&(i=this.triggerable[e],void 0!==i&&(this.active[e]=i,this._reportExperimentActivated(e,a,i))),i||null}_reportExperimentActivated(e,t,a,i){const s={add_to_experiment:!!t,experiment_name:e};if(i&&(s.override_group=i),a&&(s.experiment_group=a),this.useBatching)this._queuedResource||(this._queuedResource=new n.b("ActivateExperimentResource",e=>({experiments:e}))),this._queuedResource.enqueue(s);else{r.a.create("ActivateExperimentResource",s).callCreate({showError:!1})}}}},sErn:function(e,t,a){a.d(t,"a",(function(){return n}));var i=a("La7j");function n(e){e||(e={});const{active_experiments:t,triggerable_experiments:a,batch_exp:n}=e;return{experiments:new i.a(t,a,n)}}},vZlu:function(e,t,a){a.d(t,"g",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return c}));const i=e=>({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:e}});function n(e){const{currentTime:t,isPromoted:a,pinId:i}=e;return{type:"SET_CURRENT_VIDEO",payload:{pinId:i,isPromoted:a,currentTime:t}}}function r(e){return{type:"SET_IS_AUTOPLAY",payload:{isAutoplay:e}}}function s(e){const{currentTime:t,isPromoted:a,pinId:i}=e;return{type:"PAUSE_CURRENT_VIDEO",payload:{currentTime:t,pinId:i,isPromoted:a}}}function o(e){return{type:"SET_APP_FOCUS_STATE",payload:{appInFocus:e}}}function l(e){return{type:"SET_VIEWPORT_SIZE",payload:{viewportSize:e}}}function c(e){return{type:"SET_FOOTER_VISIBILITY_STATE",payload:{footerPlusButtonVisible:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/64-204be505ecf46639e735.mjs.map